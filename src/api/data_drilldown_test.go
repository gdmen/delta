package api

import (
	"github.com/gdmen/delta/src/common"
	_ "github.com/go-sql-driver/mysql"
	"io/ioutil"
	"net/http"
	"net/http/httptest"
	"strings"
	"testing"
)

func TestGetDrilldownBasic(t *testing.T) {
	c, err := common.ReadConfig("../../test_conf.json")
	if err != nil {
		t.Fatalf("Couldn't read config: %v", err)
	}
	ResetTestApi(c)
	InsertTestMeasurementTypes(c)
	InsertTestMeasurements(c)
	r := TestApi.GetRouter()

	resp := httptest.NewRecorder()

	req, _ := http.NewRequest("GET", `/api/v1/data/drilldown?fields=[{"name":"Brazilian%20Jiu-Jitsu","attr":2},{"name":"Judo","attr":2},{"name":"Wrestling","attr":2}]&increment=2`, nil)

	r.ServeHTTP(resp, req)

	if resp.Code != http.StatusOK {
		t.Fatalf("Expected status code %d, got %d. . .\n%+v", http.StatusOK, resp.Code, resp)
	}

	body, err := ioutil.ReadAll(resp.Body)
	if err != nil {
		t.Fatal(err)
	}
	if strings.TrimSpace(string(body)) != `{"data":[{"name":"2015-06-27","drilldown":"2015-06-27","y":2},{"name":"2015-07-04","drilldown":"2015-07-04","y":2},{"name":"2015-07-11","drilldown":"2015-07-11","y":0},{"name":"2015-07-18","drilldown":"2015-07-18","y":4},{"name":"2015-07-25","drilldown":"2015-07-25","y":4},{"name":"2015-08-01","drilldown":"2015-08-01","y":5},{"name":"2015-08-08","drilldown":"2015-08-08","y":4.5},{"name":"2015-08-15","drilldown":"2015-08-15","y":0},{"name":"2015-08-22","drilldown":"2015-08-22","y":0},{"name":"2015-08-29","drilldown":"2015-08-29","y":4},{"name":"2015-09-05","drilldown":"2015-09-05","y":0},{"name":"2015-09-12","drilldown":"2015-09-12","y":2.5},{"name":"2015-09-19","drilldown":"2015-09-19","y":4},{"name":"2015-09-26","drilldown":"2015-09-26","y":0},{"name":"2015-10-03","drilldown":"2015-10-03","y":4},{"name":"2015-10-10","drilldown":"2015-10-10","y":4},{"name":"2015-10-17","drilldown":"2015-10-17","y":4.5},{"name":"2015-10-24","drilldown":"2015-10-24","y":4.5},{"name":"2015-10-31","drilldown":"2015-10-31","y":5.666666666666667},{"name":"2015-11-07","drilldown":"2015-11-07","y":10.333333333333334},{"name":"2015-11-14","drilldown":"2015-11-14","y":7.5},{"name":"2015-11-21","drilldown":"2015-11-21","y":3.5},{"name":"2015-11-28","drilldown":"2015-11-28","y":0},{"name":"2015-12-05","drilldown":"2015-12-05","y":0},{"name":"2015-12-12","drilldown":"2015-12-12","y":0},{"name":"2015-12-19","drilldown":"2015-12-19","y":0},{"name":"2015-12-26","drilldown":"2015-12-26","y":0},{"name":"2016-01-02","drilldown":"2016-01-02","y":0},{"name":"2016-01-09","drilldown":"2016-01-09","y":2},{"name":"2016-01-16","drilldown":"2016-01-16","y":1.8333333333333333},{"name":"2016-01-23","drilldown":"2016-01-23","y":7},{"name":"2016-01-30","drilldown":"2016-01-30","y":2},{"name":"2016-02-06","drilldown":"2016-02-06","y":6.25},{"name":"2016-02-13","drilldown":"2016-02-13","y":7.5},{"name":"2016-02-20","drilldown":"2016-02-20","y":10},{"name":"2016-02-27","drilldown":"2016-02-27","y":10.166666666666666},{"name":"2016-03-05","drilldown":"2016-03-05","y":7},{"name":"2016-03-12","drilldown":"2016-03-12","y":6.5},{"name":"2016-03-19","drilldown":"2016-03-19","y":9.25},{"name":"2016-03-26","drilldown":"2016-03-26","y":7.75},{"name":"2016-04-02","drilldown":"2016-04-02","y":2.75},{"name":"2016-04-09","drilldown":"2016-04-09","y":0},{"name":"2016-04-16","drilldown":"2016-04-16","y":0},{"name":"2016-04-23","drilldown":"2016-04-23","y":5},{"name":"2016-04-30","drilldown":"2016-04-30","y":0},{"name":"2016-05-07","drilldown":"2016-05-07","y":6},{"name":"2016-05-14","drilldown":"2016-05-14","y":7.75},{"name":"2016-05-21","drilldown":"2016-05-21","y":8},{"name":"2016-05-28","drilldown":"2016-05-28","y":6.25},{"name":"2016-06-04","drilldown":"2016-06-04","y":8.333333333333332},{"name":"2016-06-11","drilldown":"2016-06-11","y":2},{"name":"2016-06-18","drilldown":"2016-06-18","y":4.5},{"name":"2016-06-25","drilldown":"2016-06-25","y":2},{"name":"2016-07-02","drilldown":"2016-07-02","y":7.25},{"name":"2016-07-09","drilldown":"2016-07-09","y":1.5},{"name":"2016-07-16","drilldown":"2016-07-16","y":2.75},{"name":"2016-07-23","drilldown":"2016-07-23","y":5.5},{"name":"2016-07-30","drilldown":"2016-07-30","y":2},{"name":"2016-08-06","drilldown":"2016-08-06","y":0},{"name":"2016-08-13","drilldown":"2016-08-13","y":0},{"name":"2016-08-20","drilldown":"2016-08-20","y":0},{"name":"2016-08-27","drilldown":"2016-08-27","y":0},{"name":"2016-09-03","drilldown":"2016-09-03","y":7},{"name":"2016-09-10","drilldown":"2016-09-10","y":6.5},{"name":"2016-09-17","drilldown":"2016-09-17","y":0},{"name":"2016-09-24","drilldown":"2016-09-24","y":8.5},{"name":"2016-10-01","drilldown":"2016-10-01","y":6.25},{"name":"2016-10-08","drilldown":"2016-10-08","y":5},{"name":"2016-10-15","drilldown":"2016-10-15","y":12.5},{"name":"2016-10-22","drilldown":"2016-10-22","y":3.25},{"name":"2016-10-29","drilldown":"2016-10-29","y":0},{"name":"2016-11-05","drilldown":"2016-11-05","y":2.25},{"name":"2016-11-12","drilldown":"2016-11-12","y":5.5},{"name":"2016-11-19","drilldown":"2016-11-19","y":2.5},{"name":"2016-11-26","drilldown":"2016-11-26","y":2.5},{"name":"2016-12-03","drilldown":"2016-12-03","y":5.25},{"name":"2016-12-10","drilldown":"2016-12-10","y":8.25},{"name":"2016-12-17","drilldown":"2016-12-17","y":5},{"name":"2016-12-24","drilldown":"2016-12-24","y":2},{"name":"2016-12-31","drilldown":"2016-12-31","y":0},{"name":"2017-01-07","drilldown":"2017-01-07","y":10.833333333333334},{"name":"2017-01-14","drilldown":"2017-01-14","y":3.5},{"name":"2017-01-21","drilldown":"2017-01-21","y":9},{"name":"2017-01-28","drilldown":"2017-01-28","y":8.783333333333333},{"name":"2017-02-04","drilldown":"2017-02-04","y":9.916666666666668},{"name":"2017-02-11","drilldown":"2017-02-11","y":6.916666666666667},{"name":"2017-02-18","drilldown":"2017-02-18","y":12.666666666666668},{"name":"2017-02-25","drilldown":"2017-02-25","y":2},{"name":"2017-03-04","drilldown":"2017-03-04","y":3.25},{"name":"2017-03-11","drilldown":"2017-03-11","y":4.833333333333333},{"name":"2017-03-18","drilldown":"2017-03-18","y":2.5},{"name":"2017-03-25","drilldown":"2017-03-25","y":5},{"name":"2017-04-01","drilldown":"2017-04-01","y":4.5},{"name":"2017-04-08","drilldown":"2017-04-08","y":9.416666666666666},{"name":"2017-04-15","drilldown":"2017-04-15","y":7.166666666666666},{"name":"2017-04-22","drilldown":"2017-04-22","y":5.5},{"name":"2017-04-29","drilldown":"2017-04-29","y":10.833333333333334},{"name":"2017-05-06","drilldown":"2017-05-06","y":5.25},{"name":"2017-05-13","drilldown":"2017-05-13","y":8.5},{"name":"2017-05-20","drilldown":"2017-05-20","y":3.833333333333333},{"name":"2017-05-27","drilldown":"2017-05-27","y":8.083333333333334},{"name":"2017-06-03","drilldown":"2017-06-03","y":5.25},{"name":"2017-06-10","drilldown":"2017-06-10","y":9.583333333333334},{"name":"2017-06-17","drilldown":"2017-06-17","y":4.583333333333333},{"name":"2017-06-24","drilldown":"2017-06-24","y":6.5},{"name":"2017-07-01","drilldown":"2017-07-01","y":5.25},{"name":"2017-07-08","drilldown":"2017-07-08","y":7.333333333333333},{"name":"2017-07-15","drilldown":"2017-07-15","y":6.5},{"name":"2017-07-22","drilldown":"2017-07-22","y":9},{"name":"2017-07-29","drilldown":"2017-07-29","y":1.5},{"name":"2017-08-05","drilldown":"2017-08-05","y":2.25},{"name":"2017-08-12","drilldown":"2017-08-12","y":6},{"name":"2017-08-19","drilldown":"2017-08-19","y":8},{"name":"2017-08-26","drilldown":"2017-08-26","y":3.25},{"name":"2017-09-02","drilldown":"2017-09-02","y":7.75},{"name":"2017-09-09","drilldown":"2017-09-09","y":7.5},{"name":"2017-09-16","drilldown":"2017-09-16","y":10.25},{"name":"2017-09-23","drilldown":"2017-09-23","y":8.75},{"name":"2017-09-30","drilldown":"2017-09-30","y":7},{"name":"2017-10-07","drilldown":"2017-10-07","y":8.25},{"name":"2017-10-14","drilldown":"2017-10-14","y":0},{"name":"2017-10-21","drilldown":"2017-10-21","y":2.5},{"name":"2017-10-28","drilldown":"2017-10-28","y":3.25},{"name":"2017-11-04","drilldown":"2017-11-04","y":9.25},{"name":"2017-11-11","drilldown":"2017-11-11","y":6},{"name":"2017-11-18","drilldown":"2017-11-18","y":7.666666666666667},{"name":"2017-11-25","drilldown":"2017-11-25","y":2}],"drilldown":[{"name":"2015-06-27","id":"2015-06-27","data":[["2015-06-21",0],["2015-06-22",0],["2015-06-23",1],["2015-06-24",0],["2015-06-25",1],["2015-06-26",0],["2015-06-27",0]]},{"name":"2015-07-04","id":"2015-07-04","data":[["2015-06-28",0],["2015-06-29",0],["2015-06-30",1],["2015-07-01",0],["2015-07-02",1],["2015-07-03",0],["2015-07-04",0]]},{"name":"2015-07-18","id":"2015-07-18","data":[["2015-07-12",0],["2015-07-13",0],["2015-07-14",2.5],["2015-07-15",0],["2015-07-16",0],["2015-07-17",0],["2015-07-18",1.5]]},{"name":"2015-07-25","id":"2015-07-25","data":[["2015-07-19",0],["2015-07-20",0],["2015-07-21",2.5],["2015-07-22",0],["2015-07-23",1.5],["2015-07-24",0],["2015-07-25",0]]},{"name":"2015-08-01","id":"2015-08-01","data":[["2015-07-26",0],["2015-07-27",0],["2015-07-28",2],["2015-07-29",0],["2015-07-30",2],["2015-07-31",0],["2015-08-01",1]]},{"name":"2015-08-08","id":"2015-08-08","data":[["2015-08-02",0],["2015-08-03",0],["2015-08-04",2.5],["2015-08-05",0],["2015-08-06",2],["2015-08-07",0],["2015-08-08",0]]},{"name":"2015-08-29","id":"2015-08-29","data":[["2015-08-23",0],["2015-08-24",2],["2015-08-25",0],["2015-08-26",2],["2015-08-27",0],["2015-08-28",0],["2015-08-29",0]]},{"name":"2015-09-12","id":"2015-09-12","data":[["2015-09-06",0],["2015-09-07",0],["2015-09-08",0],["2015-09-09",0],["2015-09-10",2.5],["2015-09-11",0],["2015-09-12",0]]},{"name":"2015-09-19","id":"2015-09-19","data":[["2015-09-13",0],["2015-09-14",2],["2015-09-15",0],["2015-09-16",2],["2015-09-17",0],["2015-09-18",0],["2015-09-19",0]]},{"name":"2015-10-03","id":"2015-10-03","data":[["2015-09-27",0],["2015-09-28",0],["2015-09-29",0],["2015-09-30",2],["2015-10-01",0],["2015-10-02",2],["2015-10-03",0]]},{"name":"2015-10-10","id":"2015-10-10","data":[["2015-10-04",0],["2015-10-05",2],["2015-10-06",0],["2015-10-07",2],["2015-10-08",0],["2015-10-09",0],["2015-10-10",0]]},{"name":"2015-10-17","id":"2015-10-17","data":[["2015-10-11",0],["2015-10-12",0],["2015-10-13",0],["2015-10-14",1],["2015-10-15",1.5],["2015-10-16",2],["2015-10-17",0]]},{"name":"2015-10-24","id":"2015-10-24","data":[["2015-10-18",0],["2015-10-19",1.5],["2015-10-20",1.5],["2015-10-21",1.5],["2015-10-22",0],["2015-10-23",0],["2015-10-24",0]]},{"name":"2015-10-31","id":"2015-10-31","data":[["2015-10-25",0],["2015-10-26",1.6666666666666667],["2015-10-27",0],["2015-10-28",2],["2015-10-29",0],["2015-10-30",2],["2015-10-31",0]]},{"name":"2015-11-07","id":"2015-11-07","data":[["2015-11-01",0],["2015-11-02",2],["2015-11-03",1.5],["2015-11-04",2],["2015-11-05",1.5],["2015-11-06",1.8333333333333333],["2015-11-07",1.5]]},{"name":"2015-11-14","id":"2015-11-14","data":[["2015-11-08",0],["2015-11-09",0],["2015-11-10",0],["2015-11-11",2],["2015-11-12",2.5],["2015-11-13",2],["2015-11-14",1]]},{"name":"2015-11-21","id":"2015-11-21","data":[["2015-11-15",0],["2015-11-16",0],["2015-11-17",0],["2015-11-18",2],["2015-11-19",1.5],["2015-11-20",0],["2015-11-21",0]]},{"name":"2016-01-09","id":"2016-01-09","data":[["2016-01-03",0],["2016-01-04",2],["2016-01-05",0],["2016-01-06",0],["2016-01-07",0],["2016-01-08",0],["2016-01-09",0]]},{"name":"2016-01-16","id":"2016-01-16","data":[["2016-01-10",0],["2016-01-11",0],["2016-01-12",0],["2016-01-13",0],["2016-01-14",0],["2016-01-15",1.8333333333333333],["2016-01-16",0]]},{"name":"2016-01-23","id":"2016-01-23","data":[["2016-01-17",0],["2016-01-18",2],["2016-01-19",1.5],["2016-01-20",2],["2016-01-21",1.5],["2016-01-22",0],["2016-01-23",0]]},{"name":"2016-01-30","id":"2016-01-30","data":[["2016-01-24",0],["2016-01-25",2],["2016-01-26",0],["2016-01-27",0],["2016-01-28",0],["2016-01-29",0],["2016-01-30",0]]},{"name":"2016-02-06","id":"2016-02-06","data":[["2016-01-31",0],["2016-02-01",2],["2016-02-02",2],["2016-02-03",2.25],["2016-02-04",0],["2016-02-05",0],["2016-02-06",0]]},{"name":"2016-02-13","id":"2016-02-13","data":[["2016-02-07",0],["2016-02-08",2.25],["2016-02-09",0],["2016-02-10",2],["2016-02-11",1.5],["2016-02-12",1.75],["2016-02-13",0]]},{"name":"2016-02-20","id":"2016-02-20","data":[["2016-02-14",0],["2016-02-15",1.75],["2016-02-16",1.5],["2016-02-17",3.25],["2016-02-18",1.5],["2016-02-19",2],["2016-02-20",0]]},{"name":"2016-02-27","id":"2016-02-27","data":[["2016-02-21",0],["2016-02-22",2.5],["2016-02-23",1.5],["2016-02-24",2],["2016-02-25",1.5],["2016-02-26",1.5],["2016-02-27",1.1666666666666667]]},{"name":"2016-03-05","id":"2016-03-05","data":[["2016-02-28",0],["2016-02-29",2.5],["2016-03-01",2],["2016-03-02",2.5],["2016-03-03",0],["2016-03-04",0],["2016-03-05",0]]},{"name":"2016-03-12","id":"2016-03-12","data":[["2016-03-06",0],["2016-03-07",1.5],["2016-03-08",1.5],["2016-03-09",2],["2016-03-10",1.5],["2016-03-11",0],["2016-03-12",0]]},{"name":"2016-03-19","id":"2016-03-19","data":[["2016-03-13",0],["2016-03-14",1.75],["2016-03-15",2],["2016-03-16",2.5],["2016-03-17",0],["2016-03-18",2],["2016-03-19",1]]},{"name":"2016-03-26","id":"2016-03-26","data":[["2016-03-20",0],["2016-03-21",0],["2016-03-22",0],["2016-03-23",2.5],["2016-03-24",2.25],["2016-03-25",2],["2016-03-26",1]]},{"name":"2016-04-02","id":"2016-04-02","data":[["2016-03-27",0],["2016-03-28",1.75],["2016-03-29",0],["2016-03-30",1],["2016-03-31",0],["2016-04-01",0],["2016-04-02",0]]},{"name":"2016-04-23","id":"2016-04-23","data":[["2016-04-17",0],["2016-04-18",0],["2016-04-19",1.5],["2016-04-20",2],["2016-04-21",1.5],["2016-04-22",0],["2016-04-23",0]]},{"name":"2016-05-07","id":"2016-05-07","data":[["2016-05-01",0],["2016-05-02",2],["2016-05-03",2],["2016-05-04",2],["2016-05-05",0],["2016-05-06",0],["2016-05-07",0]]},{"name":"2016-05-14","id":"2016-05-14","data":[["2016-05-08",0],["2016-05-09",0],["2016-05-10",2],["2016-05-11",2],["2016-05-12",1.75],["2016-05-13",2],["2016-05-14",0]]},{"name":"2016-05-21","id":"2016-05-21","data":[["2016-05-15",0],["2016-05-16",2.25],["2016-05-17",2],["2016-05-18",0],["2016-05-19",2],["2016-05-20",1.75],["2016-05-21",0]]},{"name":"2016-05-28","id":"2016-05-28","data":[["2016-05-22",0],["2016-05-23",0],["2016-05-24",1.5],["2016-05-25",2.5],["2016-05-26",2.25],["2016-05-27",0],["2016-05-28",0]]},{"name":"2016-06-04","id":"2016-06-04","data":[["2016-05-29",0],["2016-05-30",3.5],["2016-05-31",1.8333333333333333],["2016-06-01",1.5],["2016-06-02",1.5],["2016-06-03",0],["2016-06-04",0]]},{"name":"2016-06-11","id":"2016-06-11","data":[["2016-06-05",0],["2016-06-06",0],["2016-06-07",0],["2016-06-08",0],["2016-06-09",2],["2016-06-10",0],["2016-06-11",0]]},{"name":"2016-06-18","id":"2016-06-18","data":[["2016-06-12",0],["2016-06-13",2.5],["2016-06-14",2],["2016-06-15",0],["2016-06-16",0],["2016-06-17",0],["2016-06-18",0]]},{"name":"2016-06-25","id":"2016-06-25","data":[["2016-06-19",0],["2016-06-20",0],["2016-06-21",0],["2016-06-22",2],["2016-06-23",0],["2016-06-24",0],["2016-06-25",0]]},{"name":"2016-07-02","id":"2016-07-02","data":[["2016-06-26",0],["2016-06-27",0],["2016-06-28",2],["2016-06-29",2],["2016-06-30",1.75],["2016-07-01",0],["2016-07-02",1.5]]},{"name":"2016-07-09","id":"2016-07-09","data":[["2016-07-03",0],["2016-07-04",1.5],["2016-07-05",0],["2016-07-06",0],["2016-07-07",0],["2016-07-08",0],["2016-07-09",0]]},{"name":"2016-07-16","id":"2016-07-16","data":[["2016-07-10",0],["2016-07-11",2.75],["2016-07-12",0],["2016-07-13",0],["2016-07-14",0],["2016-07-15",0],["2016-07-16",0]]},{"name":"2016-07-23","id":"2016-07-23","data":[["2016-07-17",0],["2016-07-18",0],["2016-07-19",2],["2016-07-20",0],["2016-07-21",2],["2016-07-22",0],["2016-07-23",1.5]]},{"name":"2016-07-30","id":"2016-07-30","data":[["2016-07-24",0.5],["2016-07-25",0],["2016-07-26",1.5],["2016-07-27",0],["2016-07-28",0],["2016-07-29",0],["2016-07-30",0]]},{"name":"2016-09-03","id":"2016-09-03","data":[["2016-08-28",0],["2016-08-29",2],["2016-08-30",1.5],["2016-08-31",2],["2016-09-01",1.5],["2016-09-02",0],["2016-09-03",0]]},{"name":"2016-09-10","id":"2016-09-10","data":[["2016-09-04",0],["2016-09-05",0],["2016-09-06",2.5],["2016-09-07",2.5],["2016-09-08",1.5],["2016-09-09",0],["2016-09-10",0]]},{"name":"2016-09-24","id":"2016-09-24","data":[["2016-09-18",0],["2016-09-19",2.5],["2016-09-20",3],["2016-09-21",0],["2016-09-22",3],["2016-09-23",0],["2016-09-24",0]]},{"name":"2016-10-01","id":"2016-10-01","data":[["2016-09-25",0],["2016-09-26",0],["2016-09-27",2],["2016-09-28",0],["2016-09-29",2.75],["2016-09-30",0],["2016-10-01",1.5]]},{"name":"2016-10-08","id":"2016-10-08","data":[["2016-10-02",0],["2016-10-03",0],["2016-10-04",3],["2016-10-05",0],["2016-10-06",2],["2016-10-07",0],["2016-10-08",0]]},{"name":"2016-10-15","id":"2016-10-15","data":[["2016-10-09",0],["2016-10-10",5],["2016-10-11",2.25],["2016-10-12",2.5],["2016-10-13",2],["2016-10-14",0.75],["2016-10-15",0]]},{"name":"2016-10-22","id":"2016-10-22","data":[["2016-10-16",0],["2016-10-17",0],["2016-10-18",1.75],["2016-10-19",1.5],["2016-10-20",0],["2016-10-21",0],["2016-10-22",0]]},{"name":"2016-11-05","id":"2016-11-05","data":[["2016-10-30",0],["2016-10-31",0],["2016-11-01",2.25],["2016-11-02",0],["2016-11-03",0],["2016-11-04",0],["2016-11-05",0]]},{"name":"2016-11-12","id":"2016-11-12","data":[["2016-11-06",0],["2016-11-07",0],["2016-11-08",2.5],["2016-11-09",0],["2016-11-10",3],["2016-11-11",0],["2016-11-12",0]]},{"name":"2016-11-19","id":"2016-11-19","data":[["2016-11-13",0],["2016-11-14",0],["2016-11-15",0],["2016-11-16",0],["2016-11-17",2.5],["2016-11-18",0],["2016-11-19",0]]},{"name":"2016-11-26","id":"2016-11-26","data":[["2016-11-20",0],["2016-11-21",0],["2016-11-22",2.5],["2016-11-23",0],["2016-11-24",0],["2016-11-25",0],["2016-11-26",0]]},{"name":"2016-12-03","id":"2016-12-03","data":[["2016-11-27",0],["2016-11-28",0],["2016-11-29",3],["2016-11-30",0],["2016-12-01",2.25],["2016-12-02",0],["2016-12-03",0]]},{"name":"2016-12-10","id":"2016-12-10","data":[["2016-12-04",0],["2016-12-05",0],["2016-12-06",0],["2016-12-07",4],["2016-12-08",2.25],["2016-12-09",1],["2016-12-10",1]]},{"name":"2016-12-17","id":"2016-12-17","data":[["2016-12-11",0],["2016-12-12",2.5],["2016-12-13",0],["2016-12-14",0],["2016-12-15",2.5],["2016-12-16",0],["2016-12-17",0]]},{"name":"2016-12-24","id":"2016-12-24","data":[["2016-12-18",2],["2016-12-19",0],["2016-12-20",0],["2016-12-21",0],["2016-12-22",0],["2016-12-23",0],["2016-12-24",0]]},{"name":"2017-01-07","id":"2017-01-07","data":[["2017-01-01",0],["2017-01-02",3.0833333333333335],["2017-01-03",3],["2017-01-04",2.25],["2017-01-05",2],["2017-01-06",0.5],["2017-01-07",0]]},{"name":"2017-01-14","id":"2017-01-14","data":[["2017-01-08",0],["2017-01-09",2],["2017-01-10",0],["2017-01-11",0],["2017-01-12",0],["2017-01-13",1.5],["2017-01-14",0]]},{"name":"2017-01-21","id":"2017-01-21","data":[["2017-01-15",0],["2017-01-16",0],["2017-01-17",2.5],["2017-01-18",2.25],["2017-01-19",2],["2017-01-20",2.25],["2017-01-21",0]]},{"name":"2017-01-28","id":"2017-01-28","data":[["2017-01-22",0.8333333333333334],["2017-01-23",2.6666666666666665],["2017-01-24",0.75],["2017-01-25",2.6666666666666665],["2017-01-26",1.8333333333333333],["2017-01-27",0],["2017-01-28",0.03333333333333333]]},{"name":"2017-02-04","id":"2017-02-04","data":[["2017-01-29",0],["2017-01-30",2.5],["2017-01-31",0],["2017-02-01",3.25],["2017-02-02",4.166666666666666],["2017-02-03",0],["2017-02-04",0]]},{"name":"2017-02-11","id":"2017-02-11","data":[["2017-02-05",0],["2017-02-06",2.25],["2017-02-07",0],["2017-02-08",1.5],["2017-02-09",2.75],["2017-02-10",0],["2017-02-11",0.4166666666666667]]},{"name":"2017-02-18","id":"2017-02-18","data":[["2017-02-12",1.5],["2017-02-13",2.8333333333333335],["2017-02-14",1.5],["2017-02-15",2.0833333333333335],["2017-02-16",2.75],["2017-02-17",2],["2017-02-18",0]]},{"name":"2017-02-25","id":"2017-02-25","data":[["2017-02-19",0],["2017-02-20",0],["2017-02-21",0],["2017-02-22",0],["2017-02-23",0],["2017-02-24",2],["2017-02-25",0]]},{"name":"2017-03-04","id":"2017-03-04","data":[["2017-02-26",0],["2017-02-27",0],["2017-02-28",0],["2017-03-01",2.25],["2017-03-02",0],["2017-03-03",0],["2017-03-04",1]]},{"name":"2017-03-11","id":"2017-03-11","data":[["2017-03-05",0],["2017-03-06",2],["2017-03-07",0],["2017-03-08",2.25],["2017-03-09",0.5833333333333334],["2017-03-10",0],["2017-03-11",0]]},{"name":"2017-03-18","id":"2017-03-18","data":[["2017-03-12",0],["2017-03-13",0],["2017-03-14",0],["2017-03-15",0],["2017-03-16",2.5],["2017-03-17",0],["2017-03-18",0]]},{"name":"2017-03-25","id":"2017-03-25","data":[["2017-03-19",0],["2017-03-20",2],["2017-03-21",0],["2017-03-22",0],["2017-03-23",3],["2017-03-24",0],["2017-03-25",0]]},{"name":"2017-04-01","id":"2017-04-01","data":[["2017-03-26",0],["2017-03-27",2],["2017-03-28",2.5],["2017-03-29",0],["2017-03-30",0],["2017-03-31",0],["2017-04-01",0]]},{"name":"2017-04-08","id":"2017-04-08","data":[["2017-04-02",0],["2017-04-03",2.25],["2017-04-04",2.5],["2017-04-05",2.25],["2017-04-06",2.416666666666667],["2017-04-07",0],["2017-04-08",0]]},{"name":"2017-04-15","id":"2017-04-15","data":[["2017-04-09",0],["2017-04-10",2],["2017-04-11",0],["2017-04-12",2.1666666666666665],["2017-04-13",3],["2017-04-14",0],["2017-04-15",0]]},{"name":"2017-04-22","id":"2017-04-22","data":[["2017-04-16",0],["2017-04-17",1.5],["2017-04-18",0],["2017-04-19",1.5],["2017-04-20",2.5],["2017-04-21",0],["2017-04-22",0]]},{"name":"2017-04-29","id":"2017-04-29","data":[["2017-04-23",0],["2017-04-24",1.8333333333333333],["2017-04-25",3.25],["2017-04-26",1.5],["2017-04-27",3.1666666666666665],["2017-04-28",0],["2017-04-29",1.0833333333333333]]},{"name":"2017-05-06","id":"2017-05-06","data":[["2017-04-30",0],["2017-05-01",1.3333333333333333],["2017-05-02",0],["2017-05-03",1.6666666666666667],["2017-05-04",2.25],["2017-05-05",0],["2017-05-06",0]]},{"name":"2017-05-13","id":"2017-05-13","data":[["2017-05-07",0],["2017-05-08",1],["2017-05-09",0],["2017-05-10",1.5],["2017-05-11",4.25],["2017-05-12",1.75],["2017-05-13",0]]},{"name":"2017-05-20","id":"2017-05-20","data":[["2017-05-14",0],["2017-05-15",0],["2017-05-16",0],["2017-05-17",0],["2017-05-18",1.5],["2017-05-19",1.8333333333333333],["2017-05-20",0.5]]},{"name":"2017-05-27","id":"2017-05-27","data":[["2017-05-21",0],["2017-05-22",2.5],["2017-05-23",0],["2017-05-24",1.75],["2017-05-25",2.166666666666667],["2017-05-26",1.6666666666666667],["2017-05-27",0]]},{"name":"2017-06-03","id":"2017-06-03","data":[["2017-05-28",0],["2017-05-29",0],["2017-05-30",0],["2017-05-31",2.25],["2017-06-01",3],["2017-06-02",0],["2017-06-03",0]]},{"name":"2017-06-10","id":"2017-06-10","data":[["2017-06-04",0],["2017-06-05",2.25],["2017-06-06",2],["2017-06-07",2.3333333333333335],["2017-06-08",3],["2017-06-09",0],["2017-06-10",0]]},{"name":"2017-06-17","id":"2017-06-17","data":[["2017-06-11",0],["2017-06-12",0],["2017-06-13",1.8333333333333333],["2017-06-14",0],["2017-06-15",2.75],["2017-06-16",0],["2017-06-17",0]]},{"name":"2017-06-24","id":"2017-06-24","data":[["2017-06-18",0],["2017-06-19",2],["2017-06-20",1.5],["2017-06-21",0],["2017-06-22",3],["2017-06-23",0],["2017-06-24",0]]},{"name":"2017-07-01","id":"2017-07-01","data":[["2017-06-25",0],["2017-06-26",0],["2017-06-27",2.5],["2017-06-28",0],["2017-06-29",2.75],["2017-06-30",0],["2017-07-01",0]]},{"name":"2017-07-08","id":"2017-07-08","data":[["2017-07-02",0],["2017-07-03",2],["2017-07-04",0],["2017-07-05",2],["2017-07-06",2.5],["2017-07-07",0],["2017-07-08",0.8333333333333334]]},{"name":"2017-07-15","id":"2017-07-15","data":[["2017-07-09",0],["2017-07-10",2],["2017-07-11",1.5],["2017-07-12",2],["2017-07-13",0],["2017-07-14",0],["2017-07-15",1]]},{"name":"2017-07-22","id":"2017-07-22","data":[["2017-07-16",0],["2017-07-17",2],["2017-07-18",1.5],["2017-07-19",2],["2017-07-20",2.5],["2017-07-21",0],["2017-07-22",1]]},{"name":"2017-07-29","id":"2017-07-29","data":[["2017-07-23",0],["2017-07-24",0],["2017-07-25",1.5],["2017-07-26",0],["2017-07-27",0],["2017-07-28",0],["2017-07-29",0]]},{"name":"2017-08-05","id":"2017-08-05","data":[["2017-07-30",0],["2017-07-31",0],["2017-08-01",0.75],["2017-08-02",0],["2017-08-03",0.5],["2017-08-04",0],["2017-08-05",1]]},{"name":"2017-08-12","id":"2017-08-12","data":[["2017-08-06",1.5],["2017-08-07",0],["2017-08-08",0],["2017-08-09",2],["2017-08-10",2],["2017-08-11",0.5],["2017-08-12",0]]},{"name":"2017-08-19","id":"2017-08-19","data":[["2017-08-13",0],["2017-08-14",2],["2017-08-15",1.25],["2017-08-16",2],["2017-08-17",2.75],["2017-08-18",0],["2017-08-19",0]]},{"name":"2017-08-26","id":"2017-08-26","data":[["2017-08-20",0],["2017-08-21",0],["2017-08-22",0],["2017-08-23",1.75],["2017-08-24",1.5],["2017-08-25",0],["2017-08-26",0]]},{"name":"2017-09-02","id":"2017-09-02","data":[["2017-08-27",0],["2017-08-28",2],["2017-08-29",1.75],["2017-08-30",1.75],["2017-08-31",2.25],["2017-09-01",0],["2017-09-02",0]]},{"name":"2017-09-09","id":"2017-09-09","data":[["2017-09-03",2],["2017-09-04",2],["2017-09-05",1.5],["2017-09-06",0],["2017-09-07",2],["2017-09-08",0],["2017-09-09",0]]},{"name":"2017-09-16","id":"2017-09-16","data":[["2017-09-10",0],["2017-09-11",1.75],["2017-09-12",2.5],["2017-09-13",2],["2017-09-14",3],["2017-09-15",1],["2017-09-16",0]]},{"name":"2017-09-23","id":"2017-09-23","data":[["2017-09-17",1],["2017-09-18",1.5],["2017-09-19",0],["2017-09-20",1.75],["2017-09-21",3],["2017-09-22",1.5],["2017-09-23",0]]},{"name":"2017-09-30","id":"2017-09-30","data":[["2017-09-24",2],["2017-09-25",0],["2017-09-26",0],["2017-09-27",0],["2017-09-28",2.5],["2017-09-29",2.5],["2017-09-30",0]]},{"name":"2017-10-07","id":"2017-10-07","data":[["2017-10-01",0],["2017-10-02",0],["2017-10-03",2],["2017-10-04",1.75],["2017-10-05",2.5],["2017-10-06",2],["2017-10-07",0]]},{"name":"2017-10-21","id":"2017-10-21","data":[["2017-10-15",0],["2017-10-16",0],["2017-10-17",0],["2017-10-18",0],["2017-10-19",2.5],["2017-10-20",0],["2017-10-21",0]]},{"name":"2017-10-28","id":"2017-10-28","data":[["2017-10-22",0],["2017-10-23",0],["2017-10-24",1.5],["2017-10-25",0],["2017-10-26",0.75],["2017-10-27",1],["2017-10-28",0]]},{"name":"2017-11-04","id":"2017-11-04","data":[["2017-10-29",1.5],["2017-10-30",2],["2017-10-31",2.75],["2017-11-01",0],["2017-11-02",1.5],["2017-11-03",1.5],["2017-11-04",0]]},{"name":"2017-11-11","id":"2017-11-11","data":[["2017-11-05",0],["2017-11-06",0],["2017-11-07",1],["2017-11-08",2],["2017-11-09",1.5],["2017-11-10",0],["2017-11-11",1.5]]},{"name":"2017-11-18","id":"2017-11-18","data":[["2017-11-12",2],["2017-11-13",2.1666666666666665],["2017-11-14",2.5],["2017-11-15",0],["2017-11-16",0],["2017-11-17",1],["2017-11-18",0]]},{"name":"2017-11-25","id":"2017-11-25","data":[["2017-11-19",0],["2017-11-20",0],["2017-11-21",0],["2017-11-22",2],["2017-11-23",0],["2017-11-24",0],["2017-11-25",0]]}]}` {
		t.Fatal("ERROR: " + string(body))
	}
}
